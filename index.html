<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>NERO DEWAR</title>

<style>
:root{
  --bg:#0B0B0F;
  --surface:#0F0F14;
  --text:#F2F2F2;
  --muted:#A8A8A8;
  --accent:#E2400A;
  --accent-hi:#FF6A1A;
  --border:#70350F;
  --radius:18px;
  --stroke:1px;
  --shadow:0 18px 60px rgba(0,0,0,.55);
  --glow:0 0 26px rgba(226,64,10,.28);
}

*{box-sizing:border-box}
body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
}

/* header */
header{
  position:sticky;
  top:0;
  z-index:30;
  background:rgba(11,11,15,.7);
  backdrop-filter:blur(12px);
  border-bottom:1px solid rgba(112,53,15,.45);
}
.wrap{max-width:1180px;margin:0 auto;padding:22px}
.logo{
  font-weight:1000;
  font-size:clamp(42px,7vw,86px);
  color:var(--accent);
  text-transform:uppercase;
  text-shadow:
    2px 0 rgba(0,255,140,.25),
   -2px 0 rgba(255,40,0,.35),
    0 0 30px rgba(226,64,10,.35);
}

/* album grid */
.album-grid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(200px,1fr));
  gap:18px;
}
.album-card{
  cursor:pointer;
  border-radius:18px;
  overflow:hidden;
  border:1px solid rgba(112,53,15,.55);
  background:#0F0F14;
  box-shadow:var(--shadow);
  transition:.15s;
}
.album-card:hover{
  transform:translateY(-3px);
  box-shadow:var(--shadow),var(--glow);
}
.album-card img{
  width:100%;
  aspect-ratio:1/1;
  object-fit:cover;
}
.album-meta{
  padding:12px;
  font-weight:900;
  font-size:14px;
}

/* scenes */
.scene{display:none}
.scene.active{display:block}

/* release */
.release-head{
  display:flex;
  gap:18px;
  align-items:center;
}
.release-cover{
  width:130px;
  height:130px;
  border-radius:16px;
  object-fit:cover;
  border:1px solid rgba(112,53,15,.55);
}
.release-title{
  font-weight:1000;
  font-size:26px;
}

/* tracks */
.track{
  display:flex;
  align-items:center;
  gap:16px;
  padding:14px 0;
  border-top:1px solid rgba(112,53,15,.35);
}
.track-art{
  width:56px;
  height:56px;
  border-radius:12px;
  object-fit:cover;
  border:1px solid rgba(112,53,15,.45);
}
.track-title{font-weight:900}

/* buttons */
.btn{
  margin-left:auto;
  padding:10px 16px;
  border-radius:14px;
  border:1px solid rgba(226,64,10,.6);
  background:rgba(226,64,10,.12);
  color:var(--text);
  cursor:pointer;
}
.btn:hover{background:rgba(226,64,10,.22)}

/* bottom rail */
.more-rail{
  margin-top:32px;
  padding-top:18px;
  border-top:1px solid rgba(112,53,15,.35);
}
.more-title{
  font-size:14px;
  text-transform:uppercase;
  color:var(--muted);
  margin-bottom:10px;
}
.more-grid{
  display:flex;
  gap:14px;
  overflow-x:auto;
}
.more-grid img{
  width:120px;
  height:120px;
  border-radius:14px;
  object-fit:cover;
  cursor:pointer;
  border:1px solid rgba(112,53,15,.45);
}

/* player */
.player{
  position:sticky;
  bottom:0;
  background:rgba(11,11,15,.85);
  border-top:1px solid rgba(226,64,10,.45);
  backdrop-filter:blur(14px);
}
.player-inner{
  display:flex;
  align-items:center;
  gap:16px;
  padding:16px 22px;
}
audio{width:100%}

/* footer */
footer{
  text-align:center;
  color:var(--muted);
  font-size:12px;
  padding:28px 0 80px;
}
</style>
</head>

<body>

<header>
  <div class="wrap">
    <div class="logo">NERO DEWAR</div>
  </div>
</header>

<main class="wrap">

<!-- CATALOGUE SCENE -->
<section id="catalogueScene" class="scene active">
  <div class="album-grid" id="albumGrid"></div>

  <footer>
    Copyright © 2026 James Ritchie. All rights reserved.
  </footer>
</section>

<!-- ALBUM SCENE -->
<section id="albumScene" class="scene">
  <div class="release-head">
    <img id="releaseCover" class="release-cover" />
    <div>
      <div id="releaseTitle" class="release-title"></div>
      <div id="releaseMeta" style="color:var(--muted);margin-top:6px"></div>
    </div>
  </div>

  <div id="trackList"></div>

  <!-- MORE ALBUMS -->
  <div class="more-rail">
    <div class="more-title">More Releases</div>
    <div class="more-grid" id="moreAlbums"></div>
  </div>
</section>

</main>

<!-- PLAYER -->
<div class="player">
  <div class="player-inner wrap">
    <audio id="audio" controls></audio>
  </div>
</div>

<script>
let albums=[], tracks=[];
const albumGrid=document.getElementById("albumGrid");
const trackList=document.getElementById("trackList");
const moreAlbums=document.getElementById("moreAlbums");
const audio=document.getElementById("audio");

const catalogueScene=document.getElementById("catalogueScene");
const albumScene=document.getElementById("albumScene");

const releaseCover=document.getElementById("releaseCover");
const releaseTitle=document.getElementById("releaseTitle");
const releaseMeta=document.getElementById("releaseMeta");

function showScene(scene){
  catalogueScene.classList.remove("active");
  albumScene.classList.remove("active");
  scene.classList.add("active");
}

function renderAlbums(){
  albumGrid.innerHTML=albums.map(a=>`
    <div class="album-card" data-id="${a.id}">
      <img src="${a.artwork}">
      <div class="album-meta">${a.title}</div>
    </div>
  `).join("");
  albumGrid.querySelectorAll(".album-card").forEach(card=>{
    card.onclick=()=>openAlbum(card.dataset.id);
  });
}

function openAlbum(id){
  const album=albums.find(a=>a.id===id);
  if(!album)return;

  showScene(albumScene);
  history.pushState(null,"",`#release=${id}`);

  releaseCover.src=album.artwork;
  releaseTitle.textContent=album.title;
  releaseMeta.textContent=`${album.releaseDate} • ${album.genre}`;

  const albumTracks=tracks.filter(t=>t.albumId===id).sort((a,b)=>a.trackNumber-b.trackNumber);
  trackList.innerHTML=albumTracks.map(t=>`
    <div class="track">
      <img class="track-art" src="${t.artwork||album.artwork}">
      <div class="track-title">${t.trackNumber}. ${t.title}</div>
      <button class="btn" onclick="audio.src='${t.src}';audio.play()">Play</button>
    </div>
  `).join("");

  moreAlbums.innerHTML=albums.filter(a=>a.id!==id).map(a=>`
    <img src="${a.artwork}" title="${a.title}" onclick="openAlbum('${a.id}')">
  `).join("");
}

fetch("data/albums.json").then(r=>r.json()).then(a=>{
  albums=a;
  return fetch("data/tracks.json");
}).then(r=>r.json()).then(t=>{
  tracks=t;
  renderAlbums();
});
</script>

</body>
</html>
