<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>NERO DEWAR</title>

<style>
:root{
  --bg:#0B0B0F;
  --surface:#0F0F14;
  --text:#F2F2F2;
  --muted:#A8A8A8;
  --accent:#E2400A;
  --accent-hi:#FF6A1A;
  --border:#70350F;
  --shadow:0 18px 60px rgba(0,0,0,.55);
  --glow:0 0 30px rgba(226,64,10,.35);
}

*{box-sizing:border-box}
body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
}

/* ===== HEADER ===== */
header{
  position:sticky;
  top:0;
  z-index:30;
  background:rgba(11,11,15,.75);
  backdrop-filter:blur(14px);
  border-bottom:1px solid rgba(112,53,15,.45);
}
.wrap{max-width:1180px;margin:0 auto;padding:22px}

.logo{
  font-weight:1000;
  font-size:clamp(40px,6vw,78px);
  color:var(--accent);
  text-transform:uppercase;
  letter-spacing:1px;
  text-shadow:
    2px 0 rgba(0,255,140,.25),
   -2px 0 rgba(255,40,0,.35),
    0 0 30px rgba(226,64,10,.35);
}

/* Home button (Album scene) */
.home-btn{
  margin-left:auto;
  cursor:pointer;
  font-weight:900;
  text-transform:uppercase;
  color:var(--accent);
  letter-spacing:1px;
  text-shadow:
    2px 0 rgba(0,255,140,.22),
   -2px 0 rgba(255,40,0,.32),
    0 0 18px rgba(226,64,10,.35);
}
.home-btn:hover{opacity:.85}

/* ===== SCENES ===== */
.scene{display:none}
.scene.active{display:block}

/* ===== ALBUM GRID ===== */
.album-grid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(200px,1fr));
  gap:18px;
}
.album-card{
  cursor:pointer;
  border-radius:18px;
  overflow:hidden;
  background:#0F0F14;
  border:1px solid rgba(112,53,15,.55);
  box-shadow:var(--shadow);
  transition:.15s;
}
.album-card:hover{
  transform:translateY(-3px);
  box-shadow:var(--shadow),var(--glow);
}
.album-card img{
  width:100%;
  aspect-ratio:1/1;
  object-fit:cover;
}
.album-meta{
  padding:12px;
  font-weight:900;
}

/* ===== ALBUM SCENE ===== */
.release-head{
  display:flex;
  align-items:center;
  gap:20px;
  margin-bottom:18px;
}
.release-cover{
  width:140px;
  height:140px;
  border-radius:18px;
  object-fit:cover;
  border:1px solid rgba(112,53,15,.55);
  box-shadow:0 0 30px rgba(226,64,10,.25);
}
.release-title{
  font-size:28px;
  font-weight:1000;
}

/* ===== TRACKS ===== */
.track{
  display:flex;
  align-items:center;
  gap:16px;
  padding:14px 0;
  border-top:1px solid rgba(112,53,15,.35);
}
.track-art{
  width:56px;
  height:56px;
  border-radius:14px;
  object-fit:cover;
  border:1px solid rgba(112,53,15,.45);
}
.track-title{font-weight:900}
.track button{
  margin-left:auto;
  padding:10px 18px;
  border-radius:16px;
  background:rgba(226,64,10,.15);
  border:1px solid rgba(226,64,10,.65);
  color:var(--text);
  cursor:pointer;
}
.track button:hover{background:rgba(226,64,10,.25)}

/* ===== MORE RELEASES ===== */
.more-rail{
  margin-top:36px;
  padding-top:20px;
  border-top:1px solid rgba(112,53,15,.35);
}
.more-title{
  color:var(--muted);
  font-size:13px;
  text-transform:uppercase;
  margin-bottom:10px;
}
.more-grid{
  display:flex;
  gap:14px;
  overflow-x:auto;
}
.more-grid img{
  width:120px;
  height:120px;
  border-radius:16px;
  object-fit:cover;
  border:1px solid rgba(112,53,15,.45);
  cursor:pointer;
}

/* ===== PLAYER ===== */
.player{
  position:sticky;
  bottom:0;
  background:rgba(11,11,15,.9);
  border-top:1px solid rgba(226,64,10,.45);
  box-shadow:0 -25px 60px rgba(0,0,0,.75);
}
.player-inner{
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:14px;
  padding:20px;
}

.player-art{
  width:72px;
  height:72px;
  border-radius:18px;
  object-fit:cover;
  border:1px solid rgba(112,53,15,.55);
  box-shadow:0 0 26px rgba(226,64,10,.35);
}

.controls{
  display:flex;
  gap:18px;
}
.ctrl{
  width:58px;
  height:58px;
  border-radius:50%;
  border:2px solid var(--accent);
  background:rgba(226,64,10,.12);
  color:var(--accent);
  font-size:18px;
  cursor:pointer;
  box-shadow:0 0 26px rgba(226,64,10,.45);
}
.ctrl:hover{background:rgba(226,64,10,.25)}

.progress{
  width:100%;
  max-width:420px;
  height:10px;
  border-radius:999px;
  background:rgba(112,53,15,.35);
  overflow:hidden;
}
.progress-fill{
  height:100%;
  width:0%;
  background:linear-gradient(to right,var(--accent),var(--accent-hi));
}

audio{display:none}

/* ===== FOOTER ===== */
footer{
  text-align:center;
  color:var(--muted);
  font-size:12px;
  padding:28px 0 100px;
}
</style>
</head>

<body>

<header>
  <div class="wrap" style="display:flex;align-items:flex-end;gap:20px">
    <div class="logo">NERO DEWAR</div>
    <div id="homeBtn" class="home-btn" style="display:none">HOME</div>
  </div>
</header>

<main class="wrap">

<!-- CATALOGUE -->
<section id="catalogueScene" class="scene active">
  <div id="albumGrid" class="album-grid"></div>
  <footer>Copyright © 2026 James Ritchie. All rights reserved.</footer>
</section>

<!-- ALBUM SCENE -->
<section id="albumScene" class="scene">
  <div class="release-head">
    <img id="releaseCover" class="release-cover">
    <div>
      <div id="releaseTitle" class="release-title"></div>
      <div id="releaseMeta" style="color:var(--muted)"></div>
    </div>
  </div>

  <div id="trackList"></div>

  <div class="more-rail">
    <div class="more-title">More Releases</div>
    <div id="moreAlbums" class="more-grid"></div>
  </div>
</section>

</main>

<!-- PLAYER -->
<div class="player">
  <div class="player-inner">
    <img id="playerArt" class="player-art">
    <div class="controls">
      <button class="ctrl" id="prevBtn">⏮</button>
      <button class="ctrl" id="playBtn">▶</button>
      <button class="ctrl" id="nextBtn">⏭</button>
    </div>
    <div class="progress">
      <div id="progressFill" class="progress-fill"></div>
    </div>
    <audio id="audio"></audio>
  </div>
</div>

<script>
let albums=[], tracks=[], queue=[], idx=0;
const albumGrid=document.getElementById("albumGrid");
const trackList=document.getElementById("trackList");
const moreAlbums=document.getElementById("moreAlbums");
const audio=document.getElementById("audio");

const catalogueScene=document.getElementById("catalogueScene");
const albumScene=document.getElementById("albumScene");
const homeBtn=document.getElementById("homeBtn");

const releaseCover=document.getElementById("releaseCover");
const releaseTitle=document.getElementById("releaseTitle");
const releaseMeta=document.getElementById("releaseMeta");
const playerArt=document.getElementById("playerArt");
const progressFill=document.getElementById("progressFill");

function show(scene){
  catalogueScene.classList.remove("active");
  albumScene.classList.remove("active");
  scene.classList.add("active");
  homeBtn.style.display = scene===albumScene ? "block":"none";
}

homeBtn.onclick=()=>show(catalogueScene);

function openAlbum(id){
  const album=albums.find(a=>a.id===id);
  if(!album)return;

  show(albumScene);
  releaseCover.src=album.artwork;
  releaseTitle.textContent=album.title;
  releaseMeta.textContent=`${album.releaseDate} • ${album.genre}`;

  queue=tracks.filter(t=>t.albumId===id).sort((a,b)=>a.trackNumber-b.trackNumber);
  trackList.innerHTML=queue.map((t,i)=>`
    <div class="track">
      <img class="track-art" src="${t.artwork||album.artwork}">
      <div class="track-title">${t.trackNumber}. ${t.title}</div>
      <button onclick="play(${i})">Play</button>
    </div>
  `).join("");

  moreAlbums.innerHTML=albums.filter(a=>a.id!==id)
    .map(a=>`<img src="${a.artwork}" onclick="openAlbum('${a.id}')">`).join("");
}

function play(i){
  idx=i;
  const t=queue[idx];
  audio.src=t.src;
  audio.play();
  playerArt.src=t.artwork||albums.find(a=>a.id===t.albumId).artwork;
}

document.getElementById("playBtn").onclick=()=>audio.paused?audio.play():audio.pause();
document.getElementById("prevBtn").onclick=()=>idx>0&&play(idx-1);
document.getElementById("nextBtn").onclick=()=>idx<queue.length-1&&play(idx+1);

audio.ontimeupdate=()=>{
  progressFill.style.width=((audio.currentTime/audio.duration)||0)*100+"%";
};

fetch("data/albums.json").then(r=>r.json()).then(a=>{
  albums=a;
  albumGrid.innerHTML=a.map(al=>`
    <div class="album-card" onclick="openAlbum('${al.id}')">
      <img src="${al.artwork}">
      <div class="album-meta">${al.title}</div>
    </div>
  `).join("");
  return fetch("data/tracks.json");
}).then(r=>r.json()).then(t=>tracks=t);
</script>

</body>
</html>
